<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bharat Darshan - Deep Dive</title>
    
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700;900&family=Outfit:wght@300;400;600&family=Tiro+Sanskrit&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <style>
        :root {
            --bg-dark: #050200;
            --gold: #ffd700;
            --gold-dim: #c5a000;
            --saffron: #ff5e00;
            --glass-panel: rgba(15, 10, 5, 0.95);
            --border-glow: rgba(255, 215, 0, 0.3);
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            font-family: 'Outfit', sans-serif;
            background-color: var(--bg-dark);
            overflow: hidden;
        }

        /* --- Header --- */
        nav {
            position: absolute; top: 0; width: 100%; padding: 20px 5%; z-index: 1000;
            display: flex; justify-content: space-between; align-items: center;
            background: linear-gradient(to bottom, rgba(0,0,0,0.9), transparent);
            pointer-events: none;
        }
        nav a { pointer-events: auto; }
        
        .logo {
            font-family: 'Cinzel', serif; font-size: 24px; font-weight: 700; color: var(--gold); text-decoration: none;
            display: flex; align-items: center; gap: 10px; text-shadow: 0 0 10px rgba(0,0,0,0.8);
        }
        .home-btn {
            color: white; text-decoration: none; border: 1px solid var(--gold);
            padding: 8px 20px; border-radius: 30px; background: rgba(0,0,0,0.5); transition: 0.3s;
        }
        .home-btn:hover { background: var(--gold); color: black; }

        /* --- Map --- */
        #map {
            height: 100vh; width: 100%; z-index: 1;
            background: #0a0a0a;
            filter: sepia(10%) contrast(110%) saturate(90%);
        }

        /* --- Side Panel (Detailed) --- */
        .info-panel {
            position: fixed; top: 0; right: -600px; /* Hidden */
            width: 550px; height: 100%;
            background: var(--glass-panel);
            border-left: 1px solid var(--gold);
            z-index: 2000;
            transition: right 0.6s cubic-bezier(0.77, 0, 0.175, 1);
            box-shadow: -10px 0 50px rgba(0,0,0,0.9);
            backdrop-filter: blur(15px);
            display: flex; flex-direction: column;
            pointer-events: auto;
        }
        
        .info-panel.active { right: 0; }

        /* Panel Hero Image */
        .panel-hero {
            height: 250px; width: 100%; position: relative; flex-shrink: 0;
        }
        .panel-img { width: 100%; height: 100%; object-fit: cover; mask-image: linear-gradient(to bottom, black 70%, transparent); }
        
        .close-btn {
            position: absolute; top: 20px; left: 20px; background: rgba(0,0,0,0.6); color: #fff;
            border: 1px solid var(--gold); width: 40px; height: 40px; border-radius: 50%; 
            cursor: pointer; font-size: 1.2rem; transition: 0.3s; z-index: 10;
        }
        .close-btn:hover { background: var(--gold); color: #000; }

        .panel-header-content {
            position: absolute; bottom: 10px; left: 30px; width: 80%;
        }
        .state-name { font-family: 'Cinzel', serif; font-size: 3rem; color: var(--gold); line-height: 1; text-shadow: 0 5px 15px black; }
        .state-tag { color: var(--saffron); font-size: 1rem; text-transform: uppercase; letter-spacing: 2px; font-weight: 700; text-shadow: 0 2px 5px black; }

        /* --- Tabs Navigation --- */
        .panel-tabs {
            display: flex; border-bottom: 1px solid rgba(255,255,255,0.1); padding: 0 20px;
            background: rgba(0,0,0,0.3); flex-shrink: 0;
        }
        .tab-btn {
            flex: 1; background: transparent; border: none; color: #888; padding: 15px 0;
            font-family: 'Outfit', sans-serif; font-size: 0.9rem; font-weight: 600; cursor: pointer;
            transition: 0.3s; text-transform: uppercase; letter-spacing: 1px; border-bottom: 3px solid transparent;
        }
        .tab-btn:hover { color: #fff; }
        .tab-btn.active { color: var(--gold); border-bottom: 3px solid var(--gold); }

        /* --- Panel Body (Scrollable) --- */
        .panel-body {
            flex-grow: 1; overflow-y: auto; padding: 30px;
            scrollbar-width: thin; scrollbar-color: var(--gold) #111;
        }
        
        /* Tab Content Styling */
        .tab-content { display: none; animation: fadeIn 0.5s; }
        .tab-content.active { display: block; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        .detail-block { margin-bottom: 25px; }
        .detail-block h3 { color: var(--text-white); font-family: 'Cinzel', serif; margin-bottom: 10px; font-size: 1.2rem; display: flex; align-items: center; gap: 10px; }
        .detail-block h3 i { color: var(--gold); }
        .detail-block p { color: #ccc; font-size: 0.95rem; line-height: 1.7; text-align: justify; }

        /* Stat Grid for Overview */
        .stat-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-bottom: 20px; }
        .stat-box { background: rgba(255,255,255,0.05); padding: 15px; border-radius: 10px; border: 1px solid rgba(255,255,255,0.1); }
        .stat-label { font-size: 0.8rem; color: var(--saffron); display: block; margin-bottom: 5px; }
        .stat-val { font-size: 1rem; color: #fff; font-weight: 600; }

        /* Custom Markers */
        .pulse-marker {
            width: 25px; height: 25px; background: var(--gold); border-radius: 50%;
            box-shadow: 0 0 0 rgba(255, 215, 0, 0.4); animation: pulse 2s infinite;
            border: 3px solid #fff; cursor: pointer;
        }
        @keyframes pulse {
            0% { box-shadow: 0 0 0 0 rgba(255, 215, 0, 0.7); }
            70% { box-shadow: 0 0 0 25px rgba(255, 215, 0, 0); }
            100% { box-shadow: 0 0 0 0 rgba(255, 215, 0, 0); }
        }
        .leaflet-popup-content-wrapper, .leaflet-popup-tip { background: transparent; box-shadow: none; }
        .leaflet-popup-content { color: var(--gold); font-family: 'Cinzel', serif; font-weight: bold; text-shadow: 0 2px 5px black; text-align: center; font-size: 1.1rem; }

        /* Mobile */
        @media (max-width: 600px) {
            .info-panel { width: 100%; right: -100%; }
            .panel-tabs { overflow-x: auto; }
            .tab-btn { min-width: 100px; }
        }
    </style>
</head>
<body>

    <nav>
        <a href="#" class="logo"><i class="fa-solid fa-map"></i> Bharat Darshan</a>
        <a href="index.html" class="home-btn">Exit Map</a>
    </nav>

    <div id="map"></div>

    <div class="info-panel" id="sidePanel">
        
        <div class="panel-hero">
            <img id="p-img" src="" class="panel-img">
            <button class="close-btn" onclick="closePanel()"><i class="fa-solid fa-xmark"></i></button>
            <div class="panel-header-content">
                <span class="state-tag" id="p-tag">Tagline</span>
                <h1 class="state-name" id="p-name">State Name</h1>
            </div>
        </div>

        <div class="panel-tabs">
            <button class="tab-btn active" onclick="switchTab('overview')">Overview</button>
            <button class="tab-btn" onclick="switchTab('history')">History</button>
            <button class="tab-btn" onclick="switchTab('culture')">Culture</button>
            <button class="tab-btn" onclick="switchTab('spiritual')">Spiritual</button>
        </div>

        <div class="panel-body">
            
            <div id="tab-overview" class="tab-content active">
                <div class="stat-grid">
                    <div class="stat-box">
                        <span class="stat-label">Capital</span>
                        <span class="stat-val" id="p-capital">Jaipur</span>
                    </div>
                    <div class="stat-box">
                        <span class="stat-label">Known For</span>
                        <span class="stat-val" id="p-known">Forts & Deserts</span>
                    </div>
                </div>
                <div class="detail-block">
                    <h3><i class="fa-solid fa-earth-asia"></i> Geography & Intro</h3>
                    <p id="p-intro">Introduction text goes here...</p>
                </div>
                <div class="detail-block">
                    <h3><i class="fa-solid fa-language"></i> Language</h3>
                    <p id="p-lang">Hindi, Rajasthani...</p>
                </div>
            </div>

            <div id="tab-history" class="tab-content">
                <div class="detail-block">
                    <h3><i class="fa-solid fa-scroll"></i> Dynasties</h3>
                    <p id="p-dynasty">Rajputs, Mughals, etc.</p>
                </div>
                <div class="detail-block">
                    <h3><i class="fa-solid fa-chess-rook"></i> Major Events</h3>
                    <p id="p-events">Battle of Haldighati...</p>
                </div>
            </div>

            <div id="tab-culture" class="tab-content">
                <div class="detail-block">
                    <h3><i class="fa-solid fa-music"></i> Dance & Music</h3>
                    <p id="p-arts">Ghoomar, Kalbelia...</p>
                </div>
                <div class="detail-block">
                    <h3><i class="fa-solid fa-bowl-rice"></i> Cuisine</h3>
                    <p id="p-food">Dal Baati Churma, Gatte ki Sabzi...</p>
                </div>
                <div class="detail-block">
                    <h3><i class="fa-solid fa-shirt"></i> Attire</h3>
                    <p id="p-attire">Ghagra Choli, Turbans...</p>
                </div>
            </div>

            <div id="tab-spiritual" class="tab-content">
                <div class="detail-block">
                    <h3><i class="fa-solid fa-gopuram"></i> Key Temples</h3>
                    <p id="p-temples">Dilwara Temples, Brahma Temple...</p>
                </div>
                <div class="detail-block">
                    <h3><i class="fa-solid fa-om"></i> Significance</h3>
                    <p id="p-spiritual">Land of devotion and sacrifice...</p>
                </div>
            </div>

        </div>
    </div>

    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script>
        // 1. MAP INITIALIZATION
        var map = L.map('map', { zoomControl: false, attributionControl: false, minZoom: 4 })
            .setView([22.5937, 78.9629], 5);

        L.tileLayer('https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png', {
            subdomains: 'abcd', maxZoom: 19
        }).addTo(map);

        L.control.zoom({ position: 'bottomright' }).addTo(map);

        // 2. THE GRAND DATABASE (Expanded)
        const bharatData = {
            "Rajasthan": {
                tag: "Land of Kings",
                img: "https://images.unsplash.com/photo-1599661046289-e31897846e41?q=80&w=800",
                // Overview
                capital: "Jaipur",
                known: "Forts, Desert, Royalty",
                intro: "Rajasthan is the largest state in India, known for its majestic hill forts, palaces, and the vast Thar Desert. It embodies the spirit of Rajputana valor and hospitality (Padharo Mhare Desh).",
                lang: "Hindi, Rajasthani (Marwari, Mewari)",
                // History
                dynasty: "Ruled by Rajput clans like Sisodias, Rathores, and Kachwahas. Known for resistance against invaders.",
                events: "Battle of Haldighati (1576), Construction of Chittorgarh.",
                // Culture
                arts: "Folk dances like Ghoomar and Kalbelia. Famous for Blue Pottery and Block Printing.",
                food: "Dal Baati Churma, Laal Maas, Ghevar. Food is designed to last long in arid conditions.",
                attire: "Colorful Ghagra Choli for women and large colorful Pagris (Turbans) for men.",
                // Spiritual
                temples: "Brahma Temple (Pushkar), Dilwara Jain Temples (Mount Abu), Karni Mata Temple.",
                spiritual: "A hub of Bhakti movement (Meera Bai) and Sufism (Ajmer Sharif Dargah)."
            },
            "Tamil Nadu": {
                tag: "Temple State",
                img: "https://images.unsplash.com/photo-1582562182027-b49cc24d56e0?q=80&w=800",
                // Overview
                capital: "Chennai",
                known: "Temples, Silk, Classical Arts",
                intro: "The heart of Dravidian culture. Tamil Nadu preserves one of the world's oldest living languages and classical traditions.",
                lang: "Tamil (One of the longest surviving classical languages)",
                // History
                dynasty: "Cholas, Pallavas, Pandyas. The Cholas had a powerful navy that influenced Southeast Asia.",
                events: "Building of Brihadeeswarar Temple (1010 AD), Sangam Literature Era.",
                // Culture
                arts: "Bharatanatyam (Oldest classical dance). Carnatic Music is the soul of this region.",
                food: "Idli, Dosa, Sambar, Chettinad Cuisine. Uses rice, lentils, and tamarind extensively.",
                attire: "Kanjeevaram Silk Sarees for women, Veshti (Dhoti) for men.",
                // Spiritual
                temples: "Meenakshi Temple (Madurai), Brihadeeswarar (Thanjavur), Ramanathaswamy (Rameswaram).",
                spiritual: "Land of Alvars and Nayanars who pioneered the Bhakti movement."
            },
            "Varanasi": {
                tag: "City of Light",
                img: "https://images.unsplash.com/photo-1561361513-2d000a50f0dc?q=80&w=800",
                capital: "Uttar Pradesh",
                known: "Ghats, Spirituality, Silk",
                intro: "Kashi (Varanasi) is the oldest continuously inhabited city in the world. It is said that Shiva himself founded this city.",
                lang: "Hindi, Bhojpuri, Sanskrit",
                dynasty: "Ruled by Mauryas, Guptas, and later the Maharajas of Kashi.",
                events: "Buddha's first sermon at Sarnath nearby. Center of learning for millennia.",
                arts: "Benarasi Silk Weaving. The Gharana of Classical Music (Thumri, Dadra).",
                food: "Kachori Sabzi, Banarasi Paan, Malaiyyo (Winter dessert).",
                attire: "Traditional Kurta Pajama and Benarasi Sarees.",
                temples: "Kashi Vishwanath (Jyotirlinga), Sankat Mochan Hanuman.",
                spiritual: "The city of Moksha. Hindus believe dying here liberates the soul from the cycle of rebirth."
            },
            "Kerala": {
                tag: "God's Own Country",
                img: "https://images.unsplash.com/photo-1602216056096-3b40cc0c9947?q=80&w=800",
                capital: "Thiruvananthapuram",
                known: "Backwaters, Ayurveda, Spices",
                intro: "A tropical paradise with a unique geography sandwiched between the Western Ghats and the Arabian Sea.",
                lang: "Malayalam",
                dynasty: "Cheras, Travancore Kingdom, Zamorins of Calicut.",
                events: "Arrival of Vasco da Gama (1498), Spice Trade dominance.",
                arts: "Kathakali (Dance Drama), Kalaripayattu (Martial Art), Mohiniyattam.",
                food: "Sadhya (Feast on banana leaf), Appam, Puttu. Coconut is a key ingredient.",
                attire: "Mundu and Neriyathu (White and Gold).",
                temples: "Padmanabhaswamy Temple, Sabarimala Ayyappa.",
                spiritual: "A land of religious harmony where temples, mosques, and churches have co-existed for centuries."
            },
            "Maharashtra": {
                tag: "The Great Nation",
                img: "https://images.unsplash.com/photo-1562924600-59480b4092d8?q=80&w=800",
                capital: "Mumbai",
                known: "Caves, Forts, Bollywood",
                intro: "A land of warriors and saints. It blends the rugged Sahyadri mountains with the vast Deccan plateau.",
                lang: "Marathi",
                dynasty: "Maratha Empire (Shivaji Maharaj), Satavahanas, Peshwas.",
                events: "Rise of Maratha Power, Building of Sea Forts.",
                arts: "Warli Painting, Lavani Dance, Powada (Ballad singing).",
                food: "Vada Pav, Puran Poli, Misal Pav. Spicy and flavorful.",
                attire: "Nauvari Saree (9-yard) for women, Dhoti-Kurta-Pheta for men.",
                temples: "Siddhivinayak, Shirdi Sai Baba, Tryambakeshwar (Jyotirlinga).",
                spiritual: "Home to the Varkari tradition (Pandharpur Wari) and many saints like Tukaram and Dnyaneshwar."
            }
        };

        // 3. CUSTOM MARKER
        var goldIcon = L.divIcon({
            className: 'custom-div-icon',
            html: "<div class='pulse-marker'></div>",
            iconSize: [20, 20],
            iconAnchor: [10, 10]
        });

        // 4. ADD LOCATIONS
        const locations = [
            { name: "Rajasthan", coords: [26.5, 73.8] },
            { name: "Tamil Nadu", coords: [11.1, 78.6] },
            { name: "Varanasi", coords: [25.3, 82.9] },
            { name: "Kerala", coords: [10.8, 76.2] },
            { name: "Maharashtra", coords: [19.7, 75.7] }
        ];

        locations.forEach(loc => {
            L.marker(loc.coords, { icon: goldIcon }).addTo(map)
                .bindTooltip(loc.name, { direction: 'top', offset: [0, -10], className: 'leaflet-popup-content' })
                .on('click', () => openPanel(loc.name));
        });

        // 5. TAB & PANEL LOGIC
        function openPanel(stateName) {
            const data = bharatData[stateName];
            if(data) {
                // Fill Header
                document.getElementById('p-name').innerText = stateName;
                document.getElementById('p-tag').innerText = data.tag;
                document.getElementById('p-img').src = data.img;

                // Fill Overview
                document.getElementById('p-capital').innerText = data.capital;
                document.getElementById('p-known').innerText = data.known;
                document.getElementById('p-intro').innerText = data.intro;
                document.getElementById('p-lang').innerText = data.lang;

                // Fill History
                document.getElementById('p-dynasty').innerText = data.dynasty;
                document.getElementById('p-events').innerText = data.events;

                // Fill Culture
                document.getElementById('p-arts').innerText = data.arts;
                document.getElementById('p-food').innerText = data.food;
                document.getElementById('p-attire').innerText = data.attire;

                // Fill Spiritual
                document.getElementById('p-temples').innerText = data.temples;
                document.getElementById('p-spiritual').innerText = data.spiritual;

                // Reset Tab to Overview
                switchTab('overview');
                
                // Open Panel
                document.getElementById('sidePanel').classList.add('active');
                
                // Camera Fly
                const loc = locations.find(l => l.name === stateName);
                if(loc) map.flyTo(loc.coords, 7, { duration: 1.5 });
            }
        }

        function closePanel() {
            document.getElementById('sidePanel').classList.remove('active');
            map.flyTo([22.5937, 78.9629], 5, { duration: 1.5 });
        }

        function switchTab(tabName) {
            // 1. Hide all content
            document.querySelectorAll('.tab-content').forEach(el => el.classList.remove('active'));
            // 2. Remove active class from buttons
            document.querySelectorAll('.tab-btn').forEach(btn => btn.classList.remove('active'));
            
            // 3. Show selected content & highlight button
            document.getElementById('tab-' + tabName).classList.add('active');
            // Find button with onclick containing the tabName and add active class
            // (Simple way for this demo):
            const buttons = document.querySelectorAll('.tab-btn');
            if(tabName === 'overview') buttons[0].classList.add('active');
            if(tabName === 'history') buttons[1].classList.add('active');
            if(tabName === 'culture') buttons[2].classList.add('active');
            if(tabName === 'spiritual') buttons[3].classList.add('active');
        }

    </script>
</body>
</html>